<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Find the Cats Game</title>
  <style>
    /* Center the canvas */
    body, html {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      background-color: #222;
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
</head>
<body>
  <script>
    let bgImage;
    let catsFound = 0;
    const totalCats = 3; // Total number of cats to find
    let zones = [];
    let gameEnded = false;

    function preload() {
      // Load the background image
      bgImage = loadImage('Cat.JPG', img => {
        console.log("Image loaded successfully.");
      }, err => {
        console.error("Failed to load image. Check the file path.");
      });
    }

    function setup() {
      createCanvas(1000, 1000);
      textAlign(CENTER, CENTER);
      textSize(24);
      noLoop();

      // Define interaction zones for each cat
      zones = [
        { name: 'Cat1', x: 200, y: 600, w: 100, h: 100, found: false },
        { name: 'Cat2', x: 300, y: 700, w: 100, h: 100, found: false },
        { name: 'Cat3', x: 500, y: 600, w: 100, h: 100, found: false }
      ];
      loop(); // Start the draw loop after setup
    }

    function draw() {
      // Draw the background image
      if (bgImage) {
        background(bgImage);
      } else {
        console.error("Background image not loaded.");
      }

      // Display the score at the top
      fill(255);
      textSize(32);
      text(`Cats Found: ${catsFound} / ${totalCats}`, width / 2, 40);

      // If the game is over, display the end screen
      if (gameEnded) {
        displayEndScreen();
        noLoop(); // Stop the draw loop after the game ends
      }
    }

    function mousePressed() {
      if (gameEnded) return; // If game is over, ignore further clicks

      // Check if mouse is in any cat's zone
      let foundAny = false;
      zones.forEach(zone => {
        if (!zone.found && mouseX > zone.x && mouseX < zone.x + zone.w &&
            mouseY > zone.y && mouseY < zone.y + zone.h) {
          zone.found = true;
          catsFound += 1;
          foundAny = true;
          console.log(`You found ${zone.name}!`);
          
          // Check if all cats have been found
          if (catsFound === totalCats) {
            gameEnded = true;
          }
        }
      });

      if (foundAny) {
        redraw(); // Redraw to update the score immediately
      }
    }

    function displayEndScreen() {
      // Display "Game Over" message when all cats are found
      fill(0, 150);
      rect(0, 0, width, height); // Semi-transparent overlay
      fill(255);
      textSize(48);
      text('Congratulations!', width / 2, height / 2 - 20);
      textSize(32);
      text('You found all the cats!', width / 2, height / 2 + 40);
    }
  </script>
</body>
</html>
